<script>
  // var clickedBtn; var code; Gestisco il keypress sull'input
  function manageSannedKeystrokes(event) {
    event.stopPropagation();
    var keycode = (event.keyCode
      ? event.keyCode
      : event.which);
    if (keycode == '13') {
      $("#send").click();
    } else if (event.charCode && event.charCode > 0) {
      // Scrivilo nell'input field (accumulando)
      $("#barcode").val(function (index, val) {
        return val + String.fromCharCode(event.charCode);
      })
    }
  }

  $(document).on("keypress", manageSannedKeystrokes);
  // Se $("#barcode") si becca il focus, elimino il keypress
  $("#barcode").focusin(function(){
    // Blocco il keypress del document
    $(document).off("keypress", manageSannedKeystrokes);
  });
  $("#barcode").focusout(function(){
    // Blocco il keypress del document
    $(document).on("keypress", manageSannedKeystrokes);
  });
</script>
