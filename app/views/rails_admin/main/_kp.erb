<script>
  var globalScannedValue = "";
  // var clickedBtn; var code; Gestisco il keypress sull'input
  function manageScannedKeystrokes(event) {
    alert(JSON.stringify(event));
    var keycode = (event.keyCode
      ? event.keyCode
      : event.which);
    if (keycode == '13') {
      $("input[name=barcode]").val(globalScannedValue);
      globalScannedValue = "";
      alert("GLOBALSCANNED: " + globalScannedValue);
      $("#send").click();
    } else {
      // Scrivilo nell'input field (accumulando)
      globalScannedValue += String.fromCharCode(event.charCode);
    }
  }

  $(document).on("keypress", manageScannedKeystrokes);
  // Se $("#barcode") si becca il focus, elimino il keypress
  $("#barcode").focusin(function(){
    // Blocco il keypress del document
    $(document).off("keypress", manageScannedKeystrokes);
  });
  $("#barcode").focusout(function(){
    // Blocco il keypress del document
    $(document).on("keypress", manageScannedKeystrokes);
  });
</script>
